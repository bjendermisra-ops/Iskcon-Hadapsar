<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ISKCON Hadapsar</title>
    
    <!-- Bootstrap & Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Poppins:wght@300;400;600&family=Dancing+Script:wght@700&family=Noto+Sans+Devanagari:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <style>
        /* SETTINGS */
        :root { --primary: #FF9933; --secondary: #4a2c2a; --bg-color: #FFF8E1; --card-bg: #ffffff; --text-color: #333; --logo-size: 45px; --text-img-height: 50px; --slider-height: 290px; --event-date-size: 2.5rem; --event-text-size: 1.2rem; --icon-size: 2.0rem; --card-text-size: 0.8rem; }
        [data-theme="dark"] { --primary: #FF9933; --secondary: #1a0500; --bg-color: #121212; --card-bg: #1e1e1e; --text-color: #e0e0e0; }

        body { background-color: var(--bg-color); font-family: 'Poppins', 'Noto Sans Devanagari', sans-serif; color: var(--text-color); transition: 0.3s; padding-bottom: 0; margin: 0; -webkit-tap-highlight-color: transparent; }
        a { text-decoration: none; color: var(--primary); }

        /* Navbar */
        .navbar { background-color: var(--primary); box-shadow: 0 4px 15px rgba(0,0,0,0.2); padding: 5px 0; }
        .navbar .container-fluid { display: flex; align-items: center; justify-content: space-between; flex-wrap: nowrap !important; }
        .nav-left-group { display: flex; align-items: center; gap: 8px; flex-grow: 1; overflow: hidden; }
        .navbar-brand { display: flex; align-items: center; gap: 5px; margin: 0; padding: 0; text-decoration: none; }
        .nav-logo-img { width: var(--logo-size); height: var(--logo-size); border-radius: 50%; border: 2px solid white; flex-shrink: 0; object-fit: cover; }
        .brand-text-img { height: var(--text-img-height); width: auto; max-width: 200px; object-fit: contain; margin-top: 2px; }
        .notif-btn { font-size: 1.4rem; color: white; flex-shrink: 0; padding-left: 10px; }

        /* Sidebar */
        .offcanvas { background-color: var(--bg-color); color: var(--text-color); width: 280px !important; }
        .menu-item { padding: 12px 15px; display: flex; align-items: center; font-size: 1rem; color: var(--text-color); border-radius: 10px; margin-bottom: 5px; transition: 0.2s; cursor: pointer; text-decoration: none; }
        .menu-item:active { background: rgba(255, 153, 51, 0.2); color: var(--primary); transform: scale(0.98); }
        .menu-item i { width: 30px; font-size: 1.1rem; color: var(--primary); }
        .lang-select { width: 100%; padding: 10px; border-radius: 10px; border: 1px solid var(--primary); background: var(--bg-color); color: var(--text-color); margin-bottom: 10px; outline: none; font-weight: bold; font-family: 'Poppins', 'Noto Sans Devanagari', sans-serif; }

        /* Slider */
        .hero-slider { margin: 15px; border-radius: 20px; overflow: hidden; box-shadow: 0 8px 25px rgba(0,0,0,0.15); }
        .carousel-item { height: var(--slider-height); background: var(--secondary); transition: transform .6s ease-in-out; position: relative; }
        .carousel-item img { object-fit: cover; height: 100%; width: 100%; }
        
        .slide-caption { position: absolute; bottom: 0; left: 0; width: 100%; padding: 15px 10px; text-align: center; color: white; background: linear-gradient(to top, rgba(0,0,0,0.9), transparent); text-shadow: 0 2px 4px rgba(0,0,0,0.8); }
        .bday-text { font-family: 'Dancing Script', cursive; font-size: 1.8rem; color: #FFD700; animation: bounceText 2s infinite; }
        .notice-text { font-family: 'Poppins', sans-serif; font-size: 1.1rem; font-weight: 700; background: rgba(220, 53, 69, 0.9); padding: 5px 15px; border-radius: 20px; display: inline-block; }
        @keyframes bounceText { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }

        .date-slide { height: 100%; width: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; background: linear-gradient(135deg, var(--primary), #d84315); color: white; text-align: center; padding: 10px; box-sizing: border-box; }
        .date-slide h1 { font-family: 'Cinzel', serif; font-size: 4rem; margin: 0; line-height: 1; text-shadow: 0 3px 6px rgba(0,0,0,0.2); }
        .date-slide p { font-size: 1.1rem; margin: 5px 0 10px 0; text-transform: uppercase; letter-spacing: 2px; }
        .live-clock { font-family: 'monospace'; background: rgba(0,0,0,0.25); padding: 5px 15px; border-radius: 20px; font-weight: 600; border: 1px solid rgba(255,255,255,0.3); font-size: 1.1rem; }

        .date-slide.has-event { justify-content: center; gap: 5px; padding: 15px 10px; }
        .date-slide.has-event h1 { font-size: var(--event-date-size); margin-bottom: 2px; }
        .date-slide.has-event .month-year { font-size: 0.85rem; margin: 0; opacity: 0.9; }
        .date-slide.has-event .live-clock { font-size: 0.85rem; padding: 2px 10px; margin: 5px 0; }
        
        .ekadasi-alert { font-size: clamp(1rem, 5vw, var(--event-text-size)); font-weight: 700; line-height: 1.2; margin: 5px 0; padding: 8px 12px; background: rgba(0,0,0,0.15); border-radius: 12px; width: 90%; word-wrap: break-word; }
        .ekadasi-btn { background: white; color: var(--primary); padding: 5px 20px; border-radius: 20px; font-weight: 700; font-size: 0.85rem; text-decoration: none; box-shadow: 0 4px 10px rgba(0,0,0,0.2); animation: pulseBtn 1.5s infinite; display: inline-block; margin-top: 5px; }
        @keyframes pulseBtn { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        /* Feature & List */
        .feature-card { background: var(--card-bg); border-radius: 20px; padding: 15px 5px; text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.05); height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; transition: 0.2s; border: 1px solid rgba(0,0,0,0.05); cursor: pointer; position: relative; }
        .feature-card:active { transform: scale(0.95); background: var(--bg-color); }
        .feature-card i { font-size: var(--icon-size); color: var(--primary); margin-bottom: 8px; }
        .feature-card span { font-size: var(--card-text-size); font-weight: 600; }
        
        .kids-anim { animation: bounce 2s infinite; }
        @keyframes bounce { 0%, 20%, 50%, 80%, 100% {transform: translateY(0);} 40% {transform: translateY(-5px);} 60% {transform: translateY(-3px);} }

        .live-dot { position: absolute; top: 10px; right: 30%; width: 10px; height: 10px; background-color: red; border-radius: 50%; border: 1px solid white; animation: livePulse 1.5s infinite; }
        .new-badge { position: absolute; top: 10px; right: 10px; background-color: #25D366; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.6rem; font-weight: bold; animation: livePulse 2s infinite; }
        @keyframes livePulse { 0% { opacity: 1; transform: scale(1); } 50% { opacity: 0.5; transform: scale(1.2); } 100% { opacity: 1; transform: scale(1); } }

        .section-header { display: flex; justify-content: space-between; align-items: center; margin: 30px 0 15px 0; padding: 0 5px; }
        .section-title { font-family: 'Cinzel', 'Noto Sans Devanagari', serif; color: var(--primary); font-size: 1.2rem; font-weight: 700; margin: 0; border-left: 5px solid var(--primary); padding-left: 12px; }
        .see-all { font-size: 0.85rem; font-weight: 600; color: var(--text-color); opacity: 0.7; display: flex; align-items: center; gap: 5px; }
        .h-scroll { display: flex; overflow-x: auto; gap: 15px; padding-bottom: 15px; scrollbar-width: none; padding-left: 5px; }
        .h-scroll::-webkit-scrollbar { display: none; }
        .preview-card { min-width: 160px; width: 160px; background: var(--card-bg); border-radius: 18px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.08); transition: transform 0.2s; border: 1px solid rgba(0,0,0,0.03); }
        .preview-card:active { transform: scale(0.98); }
        .preview-img { width: 100%; height: 110px; object-fit: cover; }
        .preview-info { padding: 12px; text-align: left; }
        .preview-title { font-size: 0.85rem; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; color: var(--text-color); }
        .address-box { background: var(--card-bg); border-radius: 25px; padding: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.08); margin-top: 40px; text-align: center; border: 2px solid rgba(255, 153, 51, 0.2); position: relative; overflow: hidden; scroll-margin-top: 100px; }
        .address-box::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 5px; background: var(--primary); }
        .address-text { font-size: 0.95rem; opacity: 0.8; margin-bottom: 20px; line-height: 1.6; }
        .map-btn { display: block; width: 100%; background: var(--primary); color: white; padding: 12px; border-radius: 12px; font-weight: 600; border: none; }
        .copy-btn { display: block; width: 100%; background: transparent; color: var(--primary); padding: 12px; border-radius: 12px; font-weight: 600; border: 2px solid var(--primary); }
        
        .premium-footer { background: #2d1a19; color: #ffcc80; padding-top: 0; position: relative; margin-top: 50px; text-align: center; }
        .footer-wave { width: 100%; height: auto; display: block; fill: #2d1a19; margin-top: -40px; }
        .footer-content { padding: 20px 20px 40px 20px; }
        .footer-logo-img { width: 130px; height: 130px; border-radius: 50%; border: 3px solid var(--primary); box-shadow: 0 0 20px rgba(255, 153, 51, 0.5); margin-bottom: 10px; }
        .footer-mantra { font-family: 'Cinzel', 'Noto Sans Devanagari', serif; font-size: 0.9rem; color: #fff; margin-bottom: 20px; letter-spacing: 1px; line-height: 1.5; opacity: 0.9; }
        .footer-links { margin-bottom: 25px; }
        .footer-links a { color: #ffcc80; margin: 0 8px; font-size: 0.85rem; text-decoration: none; font-weight: 500; opacity: 0.8; }
        .footer-social { display: flex; justify-content: center; gap: 15px; margin-bottom: 25px; }
        .f-icon { width: 40px; height: 40px; border-radius: 50%; background: rgba(255,255,255,0.1); display: flex; align-items: center; justify-content: center; color: white; }
        .footer-divider { height: 1px; background: rgba(255,255,255,0.1); margin: 20px 0; }
        .copyright { font-size: 0.8rem; opacity: 0.6; margin-bottom: 5px; }
        .dev-credit { font-size: 0.85rem; opacity: 0.8; font-family: 'Poppins', sans-serif; }
        .dev-name { color: var(--primary); font-weight: 700; font-family: 'Dancing Script', cursive; font-size: 1.2rem; margin-left: 5px; }
    </style>
</head>
<body>

<!-- Sidebar -->
<div class="offcanvas offcanvas-start" id="appSidebar">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title" style="font-family:'Cinzel',serif; color:var(--primary);" data-key="menu_title">ISKCON Menu</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" style="filter: invert(0.5);"></button>
    </div>
    <div class="offcanvas-body">
        
        <!-- SAFE LANGUAGE SELECTOR (Unicode Escaped) -->
        <select class="lang-select" id="langSelector" onchange="setLanguage(this.value)">
            <option value="en">&#127468;&#127463; English</option>
            <option value="hi">&#127470;&#127475; &#2361;&#2367;&#2344;&#2381;&#2340;&#2368; (Hindi)</option>
            <option value="mr">&#128681; &#2350;&#2352;&#2366;&#2336;&#2368; (Marathi)</option>
        </select>
        
        <a href="index.html" class="menu-item"><i class="fas fa-home"></i> <span data-key="home">Home</span></a>
        
        <!-- Links for Github -->
        <a href="donation.html" class="menu-item"><i class="fab fa-whatsapp"></i> <span data-key="status">Donation</span></a>
        <a href="chanting.html" class="menu-item"><i class="fas fa-om"></i> <span data-key="japa">Digital Japa</span></a>
        <a href="kids.html" class="menu-item"><i class="fas fa-child-reaching"></i> <span data-key="kids">Kids Corner</span></a>
        <a href="pune_temples.html" class="menu-item"><i class="fas fa-gopuram"></i> <span data-key="pune_temples">Pune Temples</span></a>
        <a href="tour.html" class="menu-item"><i class="fas fa-route"></i> <span data-key="tour">Temple Tour</span></a>
        
        <a href="schedule.html" class="menu-item"><i class="far fa-calendar-alt"></i> <span data-key="schedule">Schedule</span></a>
        <a href="darshan.html" class="menu-item"><i class="fas fa-video"></i> <span data-key="darshan">Live Darshan</span></a>
        <a href="gallery.html" class="menu-item"><i class="fas fa-images"></i> <span data-key="gallery">Gallery</span></a>
        <a href="videos.html" class="menu-item"><i class="fas fa-church"></i> <span data-key="videos">Temple Videos</span></a>
        <a href="kirtan.html" class="menu-item"><i class="fas fa-music"></i> <span data-key="kirtan">Kirtans</span></a>
        <a href="lectures.html" class="menu-item"><i class="fas fa-microphone"></i> <span data-key="lectures">Lectures</span></a>
        <a href="contact.html" class="menu-item"><i class="fas fa-phone-alt"></i> <span data-key="contact">Contact</span></a>
        <a href="about.html" class="menu-item"><i class="fas fa-info-circle"></i> <span data-key="about">About Us</span></a>
        <a href="privacy.html" class="menu-item"><i class="fas fa-user-shield"></i> <span data-key="privacy">Privacy Policy</span></a>
        <a href="terms.html" class="menu-item"><i class="fas fa-file-contract"></i> <span data-key="terms">Terms & Conditions</span></a>
        <hr>
        <a href="http://action_notifications" class="menu-item"><i class="fas fa-bell"></i> <span data-key="notif">Notifications</span></a>
        <a href="http://action_share" class="menu-item"><i class="fas fa-share-alt"></i> <span data-key="share">Share App</span></a>
        <hr>
        <div class="menu-item" onclick="toggleTheme()"><i class="fas fa-moon"></i> <span data-key="dark">Dark Mode</span></div>
    </div>
</div>

<!-- NAVBAR -->
<nav class="navbar sticky-top">
    <div class="container-fluid">
        <div class="nav-left-group">
            <button class="navbar-toggler shadow-none border-0 p-0" type="button" data-bs-toggle="offcanvas" data-bs-target="#appSidebar">
                <i class="fas fa-bars text-white" style="font-size:1.4rem;"></i>
            </button>
            <a class="navbar-brand" href="#">
                <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh89ueri3DvWfVUmM76dyYJSTCLcDC6oYuAT3j-ezAKl5iDeJ97q28vt2MR39RJwL8BGI91we6F4DRj-u7j1EE2NPyQRwFs0HfYcB4HjxZ9VoeUQWGR7GdARSdow00uHqEehsr6gOVDFG15mntfIdNuOrQ_fxAZHCjMWU9kEjzaUMhuN52vsKMA6Tb9Dtx3/s256/1000096788.png" class="nav-logo-img"> 
                <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgVRMyIdabzVBc7ZvvLK1C5iLFpP-nGfaR-qHEHLp7Lz4-h0vZ3mqkJZL1WM4XmUbJtLwCq4IJs7Zo9MRFc1m4uKU0aiehntaJ5FjhgD_Pg9_LPFctpr82wPIksmIypYCaEajiop7VDZiV5nvz-cbwJJRGm9qgGQSyODA-JJxkDMwOalcURlpWivbR1nyI7/s440/1000096758.png" class="brand-text-img">
            </a>
        </div>
        <a href="http://action_notifications" class="notif-btn"><i class="far fa-bell"></i></a>
    </div>
</nav>

<!-- Slider -->
<div id="heroCarousel" class="carousel slide hero-slider" data-bs-ride="carousel" data-aos="fade-down">
    <div class="carousel-inner" id="slider-inner">
        <div class="carousel-item active" style="background:#FFF8E1;">
            <div class="d-flex justify-content-center align-items-center h-100">
                <div class="spinner-border text-warning" role="status"></div>
            </div>
        </div>
    </div>
</div>

<div class="container my-3">
    <!-- Quick Actions -->
    <div class="row g-2 mb-2">
        <div class="col-6">
            <a href="donation.html" class="feature-card" style="border: 1px solid #25D366;">
                <div class="new-badge">NEW</div>
                <i class="fab fa-whatsapp" style="color:#25D366;"></i>
                <span data-key="status">Donation</span>
            </a>
        </div>
        <div class="col-6">
            <a href="chanting.html" class="feature-card" style="border: 1px solid var(--primary);">
                <i class="fas fa-om"></i>
                <span data-key="japa">Digital Japa</span>
            </a>
        </div>
    </div>

    <!-- Kids & Pune Temples -->
    <div class="row g-2 mb-3">
        <div class="col-6">
            <a href="kids.html" class="feature-card" style="border: 1px solid #ff69b4; background: linear-gradient(to bottom right, #fff0f6, #fff);">
                <i class="fas fa-child-reaching kids-anim" style="color:#ff69b4;"></i>
                <span data-key="kids">Kids Corner</span>
            </a>
        </div>
        <div class="col-6">
            <a href="pune_temples.html" class="feature-card" style="border: 1px solid #9C27B0;">
                <i class="fas fa-gopuram" style="color:#9C27B0;"></i>
                <span data-key="pune_temples_home">All Pune Temples</span>
            </a>
        </div>
    </div>

    <div class="row g-2 mb-3">
        <div class="col-4">
            <a href="schedule.html" class="feature-card">
                <i class="far fa-clock"></i>
                <span data-key="schedule">Schedule</span>
            </a>
        </div>
        <div class="col-4">
            <a href="darshan.html" class="feature-card">
                <div class="live-dot"></div>
                <i class="fas fa-video"></i>
                <span data-key="darshan">Live Darshan</span>
            </a>
        </div>
        <div class="col-4">
            <div onclick="scrollToAddress()" class="feature-card">
                <i class="fas fa-map-marker-alt"></i>
                <span data-key="visit">Visit Us</span>
            </div>
        </div>
    </div>

    <div class="section-header" data-aos="fade-right">
        <h5 class="section-title" data-key="gallery_h">Photo Gallery</h5>
        <a href="gallery.html" class="see-all" data-key="see_all">See All <i class="fas fa-chevron-right"></i></a>
    </div>
    <div class="h-scroll" id="gallery-scroll"></div>

    <div class="section-header" data-aos="fade-right">
        <h5 class="section-title" data-key="videos_h">Temple Videos</h5>
        <a href="videos.html" class="see-all" data-key="see_all">See All <i class="fas fa-chevron-right"></i></a>
    </div>
    <div class="h-scroll" id="video-scroll"></div>

    <div class="section-header" data-aos="fade-right">
        <h5 class="section-title" data-key="kirtan_h">Latest Kirtans</h5>
        <a href="kirtan.html" class="see-all" data-key="see_all">See All <i class="fas fa-chevron-right"></i></a>
    </div>
    <div class="h-scroll" id="audio-scroll"></div>

    <div class="section-header" data-aos="fade-right">
        <h5 class="section-title" data-key="lecture_h">Divine Lectures</h5>
        <a href="lectures.html" class="see-all" data-key="see_all">See All <i class="fas fa-chevron-right"></i></a>
    </div>
    <div class="h-scroll" id="lecture-scroll"></div>

    <div class="address-box" id="address-section" data-aos="fade-up">
        <h5 style="font-family:'Cinzel',serif; color:var(--primary); font-weight:700; margin-bottom:10px;" data-key="visit_h">Visit Our Temple</h5>
        <p class="address-text">GW2M+X5J, Pune - Solapur Rd, near Kanyadan Mangal Karyalaya, Aru Nagar, Bhosale Nagar, Hadapsar, Pune, Maharashtra 411028</p>
        <div class="row g-2">
            <div class="col-6"><button onclick="copyAddress()" class="copy-btn"><i class="far fa-copy"></i> <span data-key="copy">Copy</span></button></div>
            <div class="col-6"><button onclick="openMap()" class="map-btn"><i class="fas fa-location-arrow"></i> <span data-key="map">Map</span></button></div>
        </div>
    </div>
</div>

<footer class="premium-footer">
    <svg class="footer-wave" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill-opacity="1" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,160C1248,160,1344,128,1392,112L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>
    <div class="footer-content">
        <div class="footer-logo-area"><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh89ueri3DvWfVUmM76dyYJSTCLcDC6oYuAT3j-ezAKl5iDeJ97q28vt2MR39RJwL8BGI91we6F4DRj-u7j1EE2NPyQRwFs0HfYcB4HjxZ9VoeUQWGR7GdARSdow00uHqEehsr6gOVDFG15mntfIdNuOrQ_fxAZHCjMWU9kEjzaUMhuN52vsKMA6Tb9Dtx3/s256/1000096788.png" class="footer-logo-img"></div>
        <p class="footer-mantra" data-key="mantra">Hare Krishna Hare Krishna Krishna Krishna Hare Hare <br> Hare Rama Hare Rama Rama Rama Hare Hare</p>
        <div class="footer-social">
            <a href="#" class="f-icon"><i class="fab fa-youtube"></i></a>
            <a href="#" class="f-icon"><i class="fab fa-facebook-f"></i></a>
            <a href="#" class="f-icon"><i class="fab fa-instagram"></i></a>
        </div>
        <div class="footer-links">
            <a href="privacy.html" data-key="privacy">Privacy Policy</a> | 
            <a href="terms.html" data-key="terms">Terms</a> | 
            <a href="about.html" data-key="about">About</a> |
            <a href="contact.html" data-key="contact">Contact</a>
        </div>
        <div class="footer-divider"></div>
        <p class="copyright">Â© 2025 ISKCON Hadapsar. All Rights Reserved.</p>
        <p class="dev-credit" data-key="credit">Designed & Developed by <span class="dev-name">Santosh</span></p>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
    AOS.init();

    // ============================================
    // âš™ï¸  USER CONFIG (Blogger API V3)
    // ============================================
    const BLOG_ID = '2655100361109264849';
    const API_KEY = 'AIzaSyAIEywwPuNLMs73jjxHQjSAg0C1L3niXHQ';
    // ============================================

    let fetchedSliderImages = [];

    // --- 1. FETCH FROM BLOGGER API V3 (Logic Enhanced) ---
    async function fetchSliderImages() {
        const apiUrl = `https://www.googleapis.com/blogger/v3/blogs/${BLOG_ID}/posts?key=${API_KEY}&labels=Slider&fetchImages=true&maxResults=10`;
        
        try {
            const response = await fetch(apiUrl);
            if (!response.ok) throw new Error('Network response was not ok');
            const data = await response.json();
            
            if (data.items) {
                fetchedSliderImages = data.items.map(entry => {
                    let imgUrl = '';
                    const title = entry.title || '';
                    const labels = entry.labels || []; // Get all tags

                    // 1. Try to get high-res image from content HTML
                    const content = entry.content || '';
                    const imgMatch = content.match(/<img[^>]+src="([^">]+)"/);
                    
                    if (imgMatch) {
                        imgUrl = imgMatch[1];
                        imgUrl = imgUrl.replace(/\/s\d+.*?\//, '/s1080/');
                    } 
                    else if (entry.images && entry.images.length > 0) {
                        imgUrl = entry.images[0].url;
                    }

                    // 2. Determine Type
                    let type = 'normal';
                    if (labels.includes('Birthday')) type = 'birthday';
                    else if (labels.includes('Notice')) type = 'notice';

                    return { url: imgUrl, interval: 4000, title: title, type: type };
                }).filter(item => item.url !== ''); 
            }
        } catch (error) {
            console.error("Error fetching slider:", error);
            // Fallback
            fetchedSliderImages = [
                { url: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhGPbjaPsnf4VFK5CaEuf_8NgBliNVXcGQwupjDIiAlJ8nkClebBWidi2CmiKkMETsmBS7GJMynsyrvWUJQA-7hc34UusfYHO7w9jTWe02-VmiFxDdGDNbmnGqpGgsXUCbZflOldHpgt-SH_EFn9fluIIXLogALk3f_J9g_tG4Aei7QzHHoCxiTY4TRbUg/s960/unnamed.webp", interval: 1000, type: 'normal' }
            ];
        }
        setLanguage(localStorage.getItem('lang') || 'en'); 
    }

    // 2. STATIC DATA
    const gallery = [
        { img: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjEl4fFheeQljSLtRMh5Gnq3c3j6xqwSfX3YeN4pI02ebfKmtwsFXLauHOMBNdClFdgXpkaV2j5gJFwxDBMDcUVi-fonSaA8qFPnpaMPlO6u305qP0rcPqGa4iufh-W5bIXbMLIHYjApRlZhF2uw8CFb65UikYDB42pU9Iu2xW1hRSiA2gGzqvaxP9V1APd/s700/1000096371.webp", t: "Entrance", link: "gallery.html" },
        { img: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj2iMJBEfqMuK3Oa3mKqhQkVHVL8lTJ0p1YoyX77hCJwiVLpxzuMoQGxiM8qU2lU5DXGGvafYIaTKEMmKak18XBD9pr6R8fJZugNTdmoiY4lgiSQjBCe-CgXI2lDe1bvMYs6_koVGSXqlMxTuhNitYEBXwoS_amo726zM2GXMUY0uY2JTnmi3oFtqIdLwJy/s700/1000096372.webp", t: "Gaura Nitai", link: "gallery.html" },
        { img: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgftLPu_jM1WHAD6_G2d4oMSu8SRkHeb6ZE3OLM2HyXiyDPY2Ch0b2Zk18g0kGFJHd8zseNi7dMUZFz7WmuehpnHtGlOXGSedcwy4hWt0G8oWMwuU0fBw_OWAX0ZcnkIW0yomsKcwoV8KrrlVYAMErXxJMIpZk3v1cxnZKuRXWUL3lzwzgW3PzsBg2t_ger/s700/1000096370.webp", t: "Main Altar", link: "gallery.html" },
        { img: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjTdGA5YE6KB8Vjv_NB-dvHEDho3t5JXv5Cl0V2LRW6nZrujh_kasEl4AixZ-1RyWLDiaWWDnkTgabDUTbKsfiKGTeZwras2RH5nCzo5aaL2uxB9zUyn8zWw9QRH02nOo0XBrWezCUFp-Qe_9Q3QHgYLiDsMJrW1w_hxXc28YRUMmbx-hvXm2oW-I_WoBSw/s700/1000096373.webp", t: "Govardhan", link: "gallery.html" }
    ];

    const videos = [{ img: "https://i.ytimg.com/vi/b4XW-P_eA6Y/maxresdefault.jpg", t: "Janmashtami", link: "videos.html" }, { img: "https://i.ytimg.com/vi/JzF5B-qG4NQ/maxresdefault.jpg", t: "Gaur Purnima", link: "videos.html" }, { img: "https://i.ytimg.com/vi/wA-a25S-aBI/maxresdefault.jpg", t: "Sunday Feast", link: "videos.html" }];
    const audio = [{ img: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj2zqiTZ78j6B7tqYFh5Cd-agJGzRJLOLARjfgZWNDzH9YjzEJ53lN8uveWFnvniWz58inZsgDc0aZdk5Feaddu14G9hoHnEOmUPb1_3ZdkT8ShL2PWpUe_sgf-EiNU4nWqD7X9ayVkkxa_Rpw5HpmP2qXLrAb74siFSirEj_a5C8Qk1oZGTq1yrgJqQ60/s1280/maxresdefault%20(2).jpg", t: "Jai Radha Madhava", link: "aud_3.html" }, { img: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhaZSUu1t1ioA8FH5Dswww0K6l9rL__civt4QPUdSGcK9dL1CFDHY_QD_a0S6PPX66e6DG1fUx5DUL-m4sk1UmsjiZAbHCSc-PLLtaOhgMRQ_MjmsK6f6kmIzJNvHdV2XFH28Yrh8nupNqjdt0D-CdokemNsbpOpxwU2phSenRJ6a4mn282MQT2oblr2_s/s1280/maxresdefault.jpg", t: "Mangal Arti", link: "aud_1.html" }, { img: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEirgrNGMiVt9YDhP0uMOM-0ZQPEU3scVnj63XU8Y8AOd6tVNWzdN4SoR5Gpc3MO13B0esgg0w4IiM2foESz2O9zRm7XWfd7SDW7Lnz32S3F_noDfiplH57pVO6Ceqq8ckaPeyW8h9NkBiI0gkQREatMEHQ-gw7_C_upDGjoqmMgqS1mBuCwcCIPsx2qoxY/s300/ab67616d00001e02883b470cb0cf592269216bd6.jpeg", t: "kirtan by prabhupada", link: "aud_5.html" }];
    const lectures = [{ img: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjsCA3aWNRKFRUpfF8hFtZtRur4NKYsKqwCLnvpepm4XUMFUd82iVtJu4uOCZPylhvfC2Bx5tDgo2ZBFazttN8GfHRKfUfzwIcuMBbE1R91-s1IAbKiepcDOtRL9M_dUp5NVRMY0EGq5ML8vuXD90hNMKUbkG3Ke6Tv1T-IV3flgvUZUjMLjYoa4cP-kfgi/s480/1000096095.jpg", t: "parbu", link: "lectures.html" }, { img: "link", t: "Mind Control", link: "lectures.html" }, { img: "https://i.ytimg.com/vi/wdaec2-YA_k/maxresdefault.jpg", t: "Happiness", link: "lectures.html" }];

    const ekadasiData = [
        /* 2025 Remainder */
        { "date": "2025-12-01", "name_key": "e_mokshada", "link": "e_mokshada.html" },
        { "date": "2025-12-16", "name_key": "e_saphala", "link": "e_saphala.html" },
        { "date": "2025-12-30", "name_key": "e_putrada", "link": "e_putrada.html" },
        /* 2026 */
        { "date": "2026-01-14", "name_key": "e_shattila", "link": "e_shattila.html" },
        { "date": "2026-01-29", "name_key": "e_jaya", "link": "e_jaya.html" },
        { "date": "2026-02-13", "name_key": "e_vijaya", "link": "e_vijaya.html" },
        { "date": "2026-02-27", "name_key": "e_amalaki", "link": "e_amalaki.html" },
        { "date": "2026-03-14", "name_key": "e_papmoch", "link": "e_papmoch.html" },
        { "date": "2026-03-29", "name_key": "e_kamada", "link": "e_kamada.html" },
        { "date": "2026-04-13", "name_key": "e_varuthi", "link": "e_varuthi.html" },
        { "date": "2026-04-27", "name_key": "e_mohini", "link": "e_mohini.html" },
        { "date": "2026-05-12", "name_key": "e_apara", "link": "e_apara.html" },
        { "date": "2026-05-28", "name_key": "e_nirjala", "link": "e_nirjala.html" },
        { "date": "2026-06-11", "name_key": "e_yogini", "link": "e_yogini.html" },
        { "date": "2026-06-26", "name_key": "e_sayana", "link": "e_sayana.html" },
        { "date": "2026-07-11", "name_key": "e_kamika", "link": "e_kamika.html" },
        { "date": "2026-07-25", "name_key": "e_pavitra", "link": "e_pavitra.html" },
        { "date": "2026-08-09", "name_key": "e_annada", "link": "e_annada.html" },
        { "date": "2026-08-23", "name_key": "e_parivar", "link": "e_parivar.html" },
        { "date": "2026-09-07", "name_key": "e_indira", "link": "e_indira.html" },
        { "date": "2026-09-22", "name_key": "e_papanku", "link": "e_papanku.html" },
        { "date": "2026-10-06", "name_key": "e_rama", "link": "e_rama.html" },
        { "date": "2026-10-21", "name_key": "e_prabod", "link": "e_prabod.html" },
        { "date": "2026-11-05", "name_key": "e_utpanna", "link": "e_utpanna.html" },
        { "date": "2026-11-19", "name_key": "e_mokshada", "link": "e_mokshada.html" },
        { "date": "2026-12-04", "name_key": "e_saphala", "link": "e_saphala.html" },
        { "date": "2026-12-19", "name_key": "e_putrada", "link": "e_putrada.html" }
    ];

    function loadData(data, id) {
        const el = document.getElementById(id);
        if(!el) return;
        data.forEach(i => {
            el.innerHTML += `
            <div class="preview-card" onclick="window.location.href='${i.link}'">
                <img src="${i.img}" class="preview-img">
                <div class="preview-info"><div class="preview-title">${i.t}</div></div>
            </div>`;
        });
    }
    loadData(gallery, 'gallery-scroll');
    loadData(videos, 'video-scroll');
    loadData(audio, 'audio-scroll');
    loadData(lectures, 'lecture-scroll');

    const slider = document.getElementById('slider-inner');
    const options = { timeZone: 'Asia/Kolkata', year: 'numeric', month: '2-digit', day: '2-digit' };
    const formatter = new Intl.DateTimeFormat('en-CA', options);
    
    const now = new Date();
    const todayStr = formatter.format(now);
    
    const tomDate = new Date(now);
    tomDate.setDate(tomDate.getDate() + 1);
    const tomStr = formatter.format(tomDate);

    const ekadasiToday = ekadasiData.find(e => e.date === todayStr);
    const ekadasiTom = ekadasiData.find(e => e.date === tomStr);
    
    function renderSlider(texts) {
        if(fetchedSliderImages.length === 0) return;

        const localeMap = { 'en': 'en-US', 'hi': 'hi-IN', 'mr': 'mr-IN' };
        const lang = localStorage.getItem('lang') || 'en';
        
        const dateObj = new Date(new Date().toLocaleString("en-US", {timeZone: "Asia/Kolkata"}));
        const dateNum = dateObj.getDate();
        const monthName = dateObj.toLocaleString(localeMap[lang], { month: 'long' });
        const yearNum = dateObj.getFullYear();

        let alertHTML = '';
        let hasEventClass = '';

        if (ekadasiToday) {
            alertHTML = `<div class="ekadasi-alert">${texts.today_is} ${texts[ekadasiToday.name_key]}</div><a href="${ekadasiToday.link}" class="ekadasi-btn">${texts.read_more} <i class="fas fa-arrow-right"></i></a>`;
            hasEventClass = 'has-event'; 
        } else if (ekadasiTom) {
            alertHTML = `<div class="ekadasi-alert">${texts.tom_is} ${texts[ekadasiTom.name_key]}</div><a href="${ekadasiTom.link}" class="ekadasi-btn">${texts.read_more} <i class="fas fa-arrow-right"></i></a>`;
            hasEventClass = 'has-event'; 
        }

        let html = `
            <div class="carousel-item active" data-bs-interval="2000">
                <div class="date-slide ${hasEventClass}">
                    <h1>${dateNum}</h1>
                    <p class="month-year" style="text-transform:uppercase; letter-spacing:2px;">${monthName} ${yearNum}</p>
                    <div id="clock" class="live-clock">--:--:--</div>
                    <div>${alertHTML}</div>
                </div>
            </div>`;
            
        fetchedSliderImages.forEach(img => {
            let captionHTML = '';
            if (img.type === 'birthday') {
                captionHTML = `<div class="slide-caption"><div class="bday-text">ðŸŽ‚ Happy Birthday ${img.title} ðŸŽ‚</div></div>`;
            } else if (img.type === 'notice') {
                captionHTML = `<div class="slide-caption"><div class="notice-text">ðŸ“¢ ${img.title}</div></div>`;
            }

            html += `
            <div class="carousel-item" data-bs-interval="${img.interval}">
                <img src="${img.url}">
                ${captionHTML}
            </div>`;
        });
        slider.innerHTML = html;
    }

    const langData = {
        en: {
            app_name: "ISKCON Hadapsar", menu_title: "ISKCON Menu", home: "Home", schedule: "Schedule", darshan: "Live Darshan", gallery: "Gallery", videos: "Temple Videos", kirtan: "Kirtans", lectures: "Lectures", contact: "Contact", about: "About Us", notif: "Notifications", share: "Share App", dark: "Dark Mode", visit: "Visit Us", gallery_h: "Photo Gallery", videos_h: "Temple Videos", kirtan_h: "Latest Kirtans", lecture_h: "Divine Lectures", see_all: "See All", visit_h: "Visit Our Temple", copy: "Copy", map: "Map", privacy: "Privacy Policy", terms: "Terms", mantra: "Hare Krishna Hare Krishna Krishna Krishna Hare Hare\nHare Rama Hare Rama Rama Rama Hare Hare", credit: "Designed & Developed by ",
            today_is: "Today is", tom_is: "Tomorrow is", read_more: "Read More", status: "Donation", japa: "Digital Japa",
            kids: "Kids Corner", pune_temples: "Pune Temples", pune_temples_home: "All Pune Temples", tour: "Temple Tour",
            e_mokshada: "Mokshada Ekadashi", e_saphala: "Saphala Ekadashi", e_putrada: "Putrada Ekadashi", e_shattila: "Shattila Ekadashi", e_jaya: "Jaya Ekadashi", e_vijaya: "Vijaya Ekadashi", e_amalaki: "Amalaki Ekadashi", e_papmoch: "Papmochani Ekadashi", e_kamada: "Kamada Ekadashi", e_varuthi: "Varuthini Ekadashi", e_mohini: "Mohini Ekadashi", e_apara: "Apara Ekadashi", e_nirjala: "Nirjala Ekadashi", e_yogini: "Yogini Ekadashi", e_sayana: "Sayana Ekadashi", e_kamika: "Kamika Ekadashi", e_pavitra: "Pavitropana Ekadashi", e_annada: "Annada Ekadashi", e_parivar: "Parivartini Ekadashi", e_indira: "Indira Ekadashi", e_papanku: "Papankusha Ekadashi", e_rama: "Rama Ekadashi", e_prabod: "Prabodhini Ekadashi", e_utpanna: "Utpanna Ekadashi"
        },
        hi: {
            app_name: "इस्कॉन हडपसर", menu_title: "मेनू", home: "होम", schedule: "समय सारणी", darshan: "लाइव दर्शन", gallery: "गैलरी", videos: "मंदिर वीडियो", kirtan: "कीर्तन", lectures: "प्रवचन", contact: "संपर्क", about: "हमारे बारे में", notif: "सूचनाएं", share: "शेयर करें", dark: "डार्क मोड", visit: "पधारे", gallery_h: "फोटो गैलरी", videos_h: "मंदिर वीडियो", kirtan_h: "नवीनतम कीर्तन", lecture_h: "दिव्य प्रवचन", see_all: "सभी देखें", visit_h: "हमारे मंदिर पधारें", copy: "कॉपी", map: "मैप", privacy: "गोपनीयता नीति", terms: "नियम", mantra: "हरे कृष्ण हरे कृष्ण कृष्ण कृष्ण हरे हरे\nहरे राम हरे राम राम राम हरे हरे", credit: "डिज़ाइन और विकसित: ",
            today_is: "आज है", tom_is: "कल है", read_more: "महात्म्य पढ़ें", status: "दान", japa: "डिजिटल माला",
            kids: "बाल गोपाल", pune_temples: "पुणे के मंदिर", pune_temples_home: "पुणे के सभी मंदिर", tour: "मंदिर दर्शन (Tour)",
            e_mokshada: "मोक्षदा एकादशी", e_saphala: "सफला एकादशी", e_putrada: "पुत्रदा एकादशी", e_shattila: "षटतिला एकादशी", e_jaya: "जया एकादशी", e_vijaya: "विजया एकादशी", e_amalaki: "आमल्की एकादशी", e_papmoch: "पापमोचनी एकादशी", e_kamada: "कामदा एकादशी", e_varuthi: "वरुथिनी एकादशी", e_mohini: "मोहिनी एकादशी", e_apara: "अपरा एकादशी", e_nirjala: "निर्जला एकादशी", e_yogini: "योगिनी एकादशी", e_sayana: "शयन एकादशी", e_kamika: "कामिका एकादशी", e_pavitra: "पवित्रोपना एकादशी", e_annada: "अन्नदा एकादशी", e_parivar: "परिवर्तिनी एकादशी", e_indira: "इंदिरा एकादशी", e_papanku: "पापांकुशा एकादशी", e_rama: "रमा एकादशी", e_prabod: "प्रबोधिनी एकादशी", e_utpanna: "उत्पन्ना एकादशी"
        },
        mr: {
            app_name: "इस्कॉन हडपसर", menu_title: "मेनू", home: "मुख्यपृष्ठ", schedule: "वेळापत्रक", darshan: "थेट दर्शन", gallery: "गॅलरी", videos: "मंदिर व्हिडिओ", kirtan: "कीर्तन", lectures: "प्रवचन", contact: "संपर्क", about: "आमच्याबद्दल", notif: "सूचना", share: "शेअर करा", dark: "डार्क मोड", visit: "भेट द्या", gallery_h: "फोटो गॅलरी", videos_h: "मंदिर व्हिडिओ", kirtan_h: "नवीनतम कीर्तन", lecture_h: "दिव्य प्रवचन", see_all: "सर्व पहा", visit_h: "आमच्या मंदिरात या", copy: "कॉपी", map: "नकाशा", privacy: "गोपनीयता धोरण", terms: "अटी", mantra: "हरे कृष्ण हरे कृष्ण कृष्ण कृष्ण हरे हरे\nहरे राम हरे राम राम राम हरे हरे", credit: "डिझाइन आणि विकसित: ",
            today_is: "आज आहे", tom_is: "उद्या आहे", read_more: "अधिक वाचा", status: "दान", japa: "डिजिटल माळ",
            kids: "बाल संस्कार", pune_temples: "पुण्यातील मंदिरे", pune_temples_home: "पुण्यातील सर्व मंदिरे", tour: "मंदिर सफर (Tour)",
            e_mokshada: "मोक्षदा एकादशी", e_saphala: "सफला एकादशी", e_putrada: "पुत्रदा एकादशी", e_shattila: "षटतिला एकादशी", e_jaya: "जया एकादशी", e_vijaya: "विजया एकादशी", e_amalaki: "आमल्की एकादशी", e_papmoch: "पापमोचनी एकादशी", e_kamada: "कामदा एकादशी", e_varuthi: "वरुथिनी एकादशी", e_mohini: "मोहिनी एकादशी", e_apara: "अपरा एकादशी", e_nirjala: "निर्जला एकादशी", e_yogini: "योगिनी एकादशी", e_sayana: "शयन एकादशी", e_kamika: "कामिका एकादशी", e_pavitra: "पवित्रोपना एकादशी", e_annada: "अन्नदा एकादशी", e_parivar: "परिवर्तिनी एकादशी", e_indira: "इंदिरा एकादशी", e_papanku: "पापांकुशा एकादशी", e_rama: "रमा एकादशी", e_prabod: "प्रबोधिनी एकादशी", e_utpanna: "उत्पन्ना एकादशी"
        }
    };

    function setLanguage(lang) {
        localStorage.setItem('lang', lang);
        document.getElementById('langSelector').value = lang;
        const texts = langData[lang];
        document.querySelectorAll('[data-key]').forEach(el => {
            const key = el.getAttribute('data-key');
            if(texts[key]) {
                if(key === 'credit') el.innerHTML = texts[key] + '<span class="dev-name">Santosh</span>';
                else el.innerText = texts[key];
            }
        });
        renderSlider(texts); 
    }

    function scrollToAddress() { const el = document.getElementById('address-section'); if(el) el.scrollIntoView({ behavior: 'smooth', block: 'center' }); }
    function copyAddress() { navigator.clipboard.writeText("GW2M+X5J, Pune - Solapur Rd, near Kanyadan Mangal Karyalaya, Aru Nagar, Bhosale Nagar, Hadapsar, Pune, Maharashtra 411028"); alert("Address Copied!"); }
    function openMap() { window.open("https://goo.gl/maps/YOUR_LINK_HERE"); }

    const savedLang = localStorage.getItem('lang') || 'en';
    
    fetchSliderImages().then(() => {
        setLanguage(savedLang); 
    });

    if(localStorage.getItem('theme') === 'dark') document.body.setAttribute('data-theme', 'dark');
    function toggleTheme() {
        const isDark = document.body.getAttribute('data-theme') === 'dark';
        document.body.setAttribute('data-theme', isDark ? 'light' : 'dark');
        localStorage.setItem('theme', isDark ? 'light' : 'dark');
    }

    setInterval(() => { 
        if(document.getElementById('clock')) {
            const lang = localStorage.getItem('lang') || 'en';
            const localeMap = { 'en': 'en-US', 'hi': 'hi-IN', 'mr': 'mr-IN' };
            document.getElementById('clock').innerText = new Date().toLocaleTimeString(localeMap[lang], {timeZone: "Asia/Kolkata"}); 
        }
    }, 1000);
</script>
</body>
</html>
